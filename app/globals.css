@tailwind base;
@tailwind components;
@tailwind utilities;

/* ---------- Theme tokens (HSL triplets) ---------- */
:root{
  /* default to Cloud Gray (ink-sky) so dark looks good even before load */
  --bg:224 20% 10%;
  --fg:210 20% 98%;
  --card:224 18% 12%;
  --border:224 12% 22%;
  --primary:257 90% 64%;
  --primary-foreground:0 0% 100%;
  --muted:224 12% 18%;
  
  /* Login theme variables using HSL */
  --login-bg: 224 20% 10%;
  --login-card-bg: 224 18% 12%;
  --login-text: 210 20% 98%;
  --login-border: 224 12% 22%;
  --login-input-bg: 224 18% 12%;
  --login-input-text: 210 20% 98%;
  --login-input-border: 224 12% 22%;
  --login-button-bg: 257 90% 64%;
  --login-button-text: 0 0% 100%;
  --login-muted: 224 12% 18%;
}

/* 1) Cloud Gray (unchanged) */
[data-theme="ink-sky"]{
  --bg:224 20% 10%;
  --fg:210 20% 98%;
  --card:224 18% 12%;
  --border:224 12% 22%;
  --primary:257 90% 64%;
  --primary-foreground:0 0% 100%;
  --muted:224 12% 18%;
  
  /* Login theme for ink-sky */
  --login-bg: 224 20% 10%;
  --login-card-bg: 224 18% 12%;
  --login-text: 210 20% 98%;
  --login-border: 224 12% 22%;
  --login-input-bg: 224 18% 12%;
  --login-input-text: 210 20% 98%;
  --login-input-border: 224 12% 22%;
  --login-button-bg: 257 90% 64%;
  --login-button-text: 0 0% 100%;
  --login-muted: 224 12% 18%;
}

/* 2) Lilac Noir — pink/lilac with slate */
[data-theme="lilac-noir"]{
  --bg:350 60% 96%;
  --fg:230 35% 12%;
  --card:340 35% 88%;
  --border:340 25% 78%;
  --primary:290 30% 60%;
  --primary-foreground:0 0% 100%;
  --muted:350 40% 93%;
  
  /* Login theme for lilac-noir */
  --login-bg: 350 60% 96%;
  --login-card-bg: 340 35% 88%;
  --login-text: 230 35% 12%;
  --login-border: 340 25% 78%;
  --login-input-bg: 340 35% 88%;
  --login-input-text: 230 35% 12%;
  --login-input-border: 340 25% 78%;
  --login-button-bg: 290 30% 60%;
  --login-button-text: 0 0% 100%;
  --login-muted: 350 40% 93%;
}

/* 3) Caribbean Teal — teal + soft mints */
[data-theme="caribbean-teal"]{
  --bg:160 20% 94%;
  --fg:170 30% 12%;
  --card:150 30% 85%;
  --border:150 18% 75%;
  --primary:165 40% 40%;
  --primary-foreground:0 0% 100%;
  --muted:155 22% 92%;
  
  /* Login theme for caribbean-teal */
  --login-bg: 160 20% 94%;
  --login-card-bg: 150 30% 85%;
  --login-text: 170 30% 12%;
  --login-border: 150 18% 75%;
  --login-input-bg: 150 30% 85%;
  --login-input-text: 170 30% 12%;
  --login-input-border: 150 18% 75%;
  --login-button-bg: 165 40% 40%;
  --login-button-text: 0 0% 100%;
  --login-muted: 155 22% 92%;
}

/* 4) Saffron Slate — warm saffron + modern slate */
[data-theme="saffron-slate"]{
  --bg:90 20% 91%;
  --fg:210 15% 12%;
  --card:150 16% 83%;
  --border:160 12% 74%;
  --primary:45 90% 66%;
  --primary-foreground:0 0% 10%;
  --muted:95 24% 95%;
  
  /* Login theme for saffron-slate */
  --login-bg: 90 20% 91%;
  --login-card-bg: 150 16% 83%;
  --login-text: 210 15% 12%;
  --login-border: 160 12% 74%;
  --login-input-bg: 150 16% 83%;
  --login-input-text: 210 15% 12%;
  --login-input-border: 160 12% 74%;
  --login-button-bg: 45 90% 66%;
  --login-button-text: 0 0% 10%;
  --login-muted: 95 24% 95%;
}

/* 5) Periwinkle Sky — airy blues + periwinkle depth */
[data-theme="periwinkle"]{
  --bg:205 90% 94%;
  --fg:228 30% 14%;
  --card:210 90% 82%;
  --border:205 70% 73%;
  --primary:236 45% 63%;
  --primary-foreground:0 0% 100%;
  --muted:205 65% 92%;
  
  /* Login theme for periwinkle */
  --login-bg: 205 90% 94%;
  --login-card-bg: 210 90% 82%;
  --login-text: 228 30% 14%;
  --login-border: 205 70% 73%;
  --login-input-bg: 210 90% 82%;
  --login-input-text: 228 30% 14%;
  --login-input-border: 205 70% 73%;
  --login-button-bg: 236 45% 63%;
  --login-button-text: 0 0% 100%;
  --login-muted: 205 65% 92%;
}

/* 6) Fern Mint — fresh greens */
[data-theme="fern-mint"]{
  --bg:150 60% 97%;
  --fg:160 20% 14%;
  --card:120 55% 90%;
  --border:145 45% 76%;
  --primary:140 22% 41%;
  --primary-foreground:0 0% 100%;
  --muted:150 45% 94%;
  
  /* Login theme for fern-mint */
  --login-bg: 150 60% 97%;
  --login-card-bg: 120 55% 90%;
  --login-text: 160 20% 14%;
  --login-border: 145 45% 76%;
  --login-input-bg: 120 55% 90%;
  --login-input-text: 160 20% 14%;
  --login-input-border: 145 45% 76%;
  --login-button-bg: 140 22% 41%;
  --login-button-text: 0 0% 100%;
  --login-muted: 150 45% 94%;
}

/* ---------- Base (use the variables everywhere) ---------- */
html,body{height:100%;background:hsl(var(--bg));color:hsl(var(--fg))}
.card{@apply bg-card rounded-3xl border border-border shadow-soft}

/* ---------- Login Theme Classes ---------- */
.login-container {
  background: hsl(var(--login-bg));
  color: hsl(var(--login-text));
}

.login-card {
  background: hsl(var(--login-card-bg));
  border: 1px solid hsl(var(--login-border));
  color: hsl(var(--login-text));
}

.login-input {
  background: hsl(var(--login-input-bg));
  color: hsl(var(--login-input-text));
  border: 1px solid hsl(var(--login-input-border));
}

.login-input:focus {
  border-color: hsl(var(--login-button-bg));
  outline: none;
  box-shadow: 0 0 0 2px hsl(var(--login-button-bg) / 0.2);
}

.login-button {
  background: hsl(var(--login-button-bg));
  color: hsl(var(--login-button-text));
}

.login-button:hover {
  opacity: 0.9;
}

.login-muted {
  color: hsl(var(--login-muted));
}

.login-border {
  border-color: hsl(var(--login-border));
}

/* ---------- Rest of your existing styles ---------- */
.btn{
  position:relative;padding:12px 20px;border-radius:12px;border:1px solid hsl(var(--border));
  font-weight:600;letter-spacing:.12em;background:transparent;color:hsl(var(--fg));
  transition:all .2s ease-in;overflow:hidden
}
.btn:hover{background:hsl(var(--primary));color:hsl(var(--primary-foreground));box-shadow:0 0 30px 5px rgba(99,102,241,.35)}
.btn::before{content:'';position:absolute;top:10%;left:0;height:80%;width:0;opacity:0;background:#fff;box-shadow:0 0 50px 30px #fff;transform:skewX(-20deg)}
.btn:hover::before{animation:sh02 .5s linear}
@keyframes sh02{0%{opacity:0;left:0}50%{opacity:1}100%{opacity:0;left:100%}}

.input{@apply w-full px-4 py-3 rounded-2xl border border-border bg-card outline-none}
.input:focus{@apply ring-2}
.badge{@apply px-2.5 py-1 rounded-full text-xs border border-border}

/* ---------- Loader (Bright Lizard – compact) ---------- */
.loader-wrapper{
  --loader-size: 88px;
  --loader-font: 14px;
  position: relative;
  display:flex;align-items:center;justify-content:center;
  width:var(--loader-size);height:var(--loader-size);
  font-family:"Inter",sans-serif;font-size:var(--loader-font);font-weight:300;color:white;
  border-radius:50%;background-color:transparent;user-select:none;
}
.loader{
  position:absolute;top:0;left:0;width:100%;
  aspect-ratio: 1;
  border-radius:50%;background-color:transparent;
  animation:loader-rotate 2s linear infinite;z-index:0;
}
@keyframes loader-rotate{
  0%{transform:rotate(90deg);box-shadow:0 10px 20px 0 #fff inset,0 20px 30px 0 #ad5fff inset,0 60px 60px 0 #471eec inset;}
  50%{transform:rotate(270deg);box-shadow:0 10px 20px 0 #fff inset,0 20px 10px 0 #d60a47 inset,0 40px 60px 0 #311e80 inset;}
  100%{transform:rotate(450deg);box-shadow:0 10px 20px 0 #fff inset,0 20px 30px 0 #ad5fff inset,0 60px 60px 0 #471eec inset;}
}
.loader-letter{display:inline-block;opacity:.4;transform:translateY(0);animation:loader-letter-anim 2s infinite;z-index:1;border-radius:50ch;border:none}
.loader-letter:nth-child(2){animation-delay:.1s}.loader-letter:nth-child(3){animation-delay:.2s}
.loader-letter:nth-child(4){animation-delay:.3s}.loader-letter:nth-child(5){animation-delay:.4s}
.loader-letter:nth-child(6){animation-delay:.5s}.loader-letter:nth-child(7){animation-delay:.6s}
.loader-letter:nth-child(8){animation-delay:.7s}.loader-letter:nth-child(9){animation-delay:.8s}
.loader-letter:nth-child(10){animation-delay:.9s}
@keyframes loader-letter-anim{0%,100%{opacity:.4;transform:translateY(0)}20%{opacity:1;transform:scale(1.15)}40%{opacity:.7;transform:translateY(0)}}

.loader-overlay{position:fixed;inset:0;display:grid;place-items:center;background:rgba(0,0,0,.35);backdrop-filter:blur(1px);z-index:50}

/* ---------- Flashcards flip ---------- */
.flip-card { perspective: 1000px; }
.flip-inner { position: relative;width: 100%;height: 100%;transition: transform .6s;transform-style: preserve-3d; }
.flip-inner.show-answer { transform: rotateY(180deg); }
.flip-front, .flip-back { position: absolute;inset: 0;backface-visibility: hidden;display: flex;flex-direction: column; }
.flip-back { transform: rotateY(180deg); }

/* ---------- Glass primitives (apple/tesla vibe) using THEME TOKENS ---------- */
.glass-card{
  border-radius:16px;
  background: color-mix(in srgb, hsl(var(--card)) 94%, transparent);
  border:1px solid hsl(var(--border));
  box-shadow: 0 10px 30px rgba(0,0,0,.25), inset 0 1px 0 rgba(255,255,255,.06);
  backdrop-filter: blur(14px) saturate(1.25);
}
.glass-inner{
  border-radius:12px;
  background: color-mix(in srgb, hsl(var(--card)) 92%, transparent);
  border:1px solid hsl(var(--border));
  padding:12px 14px;
}
.glass-surface{
  border:1px solid hsl(var(--border));
  box-shadow: inset 0 1px 0 rgba(255,255,255,.05);
  backdrop-filter: blur(10px) saturate(1.15);
}
.glass-chip{
  background: color-mix(in srgb, hsl(var(--primary)) 18%, hsl(var(--card)));
  color: hsl(var(--fg));
  border: 1px solid color-mix(in srgb, hsl(var(--primary)) 30%, hsl(var(--border)));
}
.glass-icon{
  width:36px;height:36px;display:grid;place-items:center;border-radius:10px;
  color:hsl(var(--primary));
  background: color-mix(in srgb, hsl(var(--card)) 96%, transparent);
  border:1px solid hsl(var(--border));
}

/* ---------- Sidebar rail & nav pills (follow theme) ---------- */
.glass-rail{
  position:relative;
  background: color-mix(in srgb, hsl(var(--card)) 92%, transparent);
  border-right:1px solid hsl(var(--border));
  backdrop-filter: blur(14px) saturate(1.1);
}
.sidebar-glow{
  position:absolute; inset:auto -40% 65% -40%;
  height:180px;
  background: radial-gradient(60% 100% at 50% 50%,
    color-mix(in srgb, hsl(var(--primary)) 35%, transparent),
    transparent 60%);
  filter: blur(24px);
  pointer-events:none; opacity:.6;
}
.nav-pill{
  display:flex; align-items:center; gap:.65rem;
  padding:.70rem .85rem; border-radius:14px;
  background: color-mix(in srgb, hsl(var(--card)) 86%, transparent);
  border:1px solid hsl(var(--border)); color: hsl(var(--fg));
  transition: background .15s ease, box-shadow .35s ease, transform .35s ease, border-color .2s ease;
  box-shadow: 12px 17px 51px rgba(0, 0, 0, 0.22);
  backdrop-filter: blur(6px);
  border-radius: 17px;
  text-align: left;
  cursor: pointer;
}
.nav-pill:hover{   border-color: color-mix(in srgb, hsl(var(--primary)) 45%, hsl(var(--border)));
  transform: scale(1.035) rotateZ(0.5deg);
  box-shadow: 0 18px 60px color-mix(in srgb, hsl(var(--primary)) 22%, rgba(0,0,0,0.20));;}
.nav-pill[data-active="true"]{
  background:
  linear-gradient(180deg,
      color-mix(in srgb, hsl(var(--primary)) 32%, transparent),
      color-mix(in srgb, hsl(var(--primary)) 90%, transparent));
  border-color: color-mix(in srgb, hsl(var(--primary)) 45%, hsl(var(--border)));
  box-shadow: 0 6px 16px color-mix(in srgb, hsl(var(--primary)) 24%, transparent);
}
.nav-icon{
  display:grid; place-items:center; width:28px; height:28px; border-radius:9px;
  color:hsl(var(--primary));
  background: color-mix(in srgb, hsl(var(--primary)) 12%, hsl(var(--card)));
  border:1px solid color-mix(in srgb, hsl(var(--primary)) 22%, hsl(var(--border)));
}

/* Ghost button used on theme cards */
.btn-ghost{
  padding:8px 12px;border-radius:10px;
  background: color-mix(in srgb, hsl(var(--card)) 88%, transparent);
  border:1px solid hsl(var(--border)); color:hsl(var(--fg));
  transition: transform .15s ease, background .2s ease; cursor:pointer;
}
.btn-ghost:hover{ transform: translateY(-1px); background: color-mix(in srgb, hsl(var(--card)) 100%, transparent); }

/* expose text color utility for your other styles */
:root { --text: hsl(var(--fg)); }

/* ===== Home feature cards (theme-aware glass) ===== */
.home-grid{
  display:grid;
  grid-template-columns: repeat( auto-fit, minmax(220px, 1fr) );
  gap: 18px;
}

/* Base card */
.home-card{
  box-sizing: border-box;
  width: 100%;
  min-height: 240px;
  background: color-mix(in srgb, hsl(var(--card)) 86%, transparent);
  border: 1px solid hsl(var(--border));
  box-shadow: 12px 17px 51px rgba(0, 0, 0, 0.22);
  backdrop-filter: blur(6px);
  border-radius: 17px;
  text-align: left;
  cursor: pointer;
  transition: transform .35s ease, border-color .2s ease, box-shadow .35s ease;
  display: flex;
  align-items: stretch;
  justify-content: stretch;
  user-select: none;
  color: hsl(var(--fg));
  text-decoration: none;
  position: relative;
  overflow: hidden;
}

/* Subtle glow that picks up the theme primary */
.home-card::after{
  content:"";
  position:absolute; inset: -40% -40% auto -40%;
  height: 120px;
  background: radial-gradient(60% 100% at 50% 50%,
    color-mix(in srgb, hsl(var(--primary)) 26%, transparent),
    transparent 60%);
  filter: blur(18px);
  opacity:.65; pointer-events:none;
}

/* Hover/active states (adapted from Uiverse) */
.home-card:hover{
  border-color: color-mix(in srgb, hsl(var(--primary)) 45%, hsl(var(--border)));
  transform: scale(1.035) rotateZ(1deg);
  box-shadow: 0 18px 60px color-mix(in srgb, hsl(var(--primary)) 22%, rgba(0,0,0,0.20));
  
}
.home-card:active{
  transform: scale(0.985);
}

/* Inner layout */
.home-card__inner{
  display:flex; flex-direction:column; gap:12px;
  padding:16px;
  width:100%;
}

/* Icon pill */
.home-card__icon{
  width: 44px; height: 44px; border-radius: 12px;
  display:grid; place-items:center;
  color: hsl(var(--primary));
  background: color-mix(in srgb, hsl(var(--primary)) 16%, hsl(var(--card)));
  border: 1px solid color-mix(in srgb, hsl(var(--primary)) 25%, hsl(var(--border)));
  box-shadow: inset 0 1px 0 rgba(255,255,255,.06);
}

/* Title & description */
.home-card__title{
  font-weight: 700; font-size: 1.05rem; letter-spacing:.2px;
}
.home-card__desc{
  opacity:.82; font-size:.92rem; line-height:1.28rem;
}

/* Tiny CTA row */
.home-card__cta{
  margin-top:auto;
  display:flex; align-items:center; gap:8px;
  font-weight:600; font-size:.9rem;
  color: hsl(var(--primary));
}

/* === Markdown (theme-aware) ============================================= */
.md-content { line-height: 1.65; color: hsl(var(--fg)); }
.md-content h1, .md-content h2, .md-content h3 {
  margin: 0.9rem 0 0.4rem;
  font-weight: 700;
}
.md-content h1 { font-size: 1.45rem; }
.md-content h2 { font-size: 1.25rem; }
.md-content h3 { font-size: 1.08rem; }

.md-content p { margin: 0.5rem 0; }
.md-content ul, .md-content ol { margin: 0.45rem 0 0.6rem 1.25rem; }
.md-content ul { list-style: disc; }
.md-content ol { list-style: decimal; }

.md-content code {
  background: color-mix(in srgb, hsl(var(--card)) 92%, transparent);
  border: 1px solid hsl(var(--border));
  padding: 0.1rem 0.35rem;
  border-radius: 6px;
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
  font-size: .92em;
}
.md-content pre {
  background: color-mix(in srgb, hsl(var(--card)) 96%, transparent);
  border: 1px solid hsl(var(--border));
  padding: .9rem 1rem;
  border-radius: 10px;
  overflow: auto;
  margin: 0.7rem 0;
}
.md-content pre code { border: none; padding: 0; background: transparent; }
.md-content blockquote {
  border-left: 3px solid hsl(var(--border));
  padding-left: .9rem;
  margin: .6rem 0;
  opacity: .9;
}
.md-content hr {
  border: none; height: 1px; background: hsl(var(--border));
  margin: .9rem 0;
}
.md-content a { color: hsl(var(--primary)); text-decoration: none; }
.md-content a:hover { text-decoration: underline; }